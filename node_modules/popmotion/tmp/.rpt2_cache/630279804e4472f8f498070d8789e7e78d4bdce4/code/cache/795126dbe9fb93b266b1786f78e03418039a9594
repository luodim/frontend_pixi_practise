{"code":"var Observer = (function () {\r\n    function Observer(_a, observer) {\r\n        var middleware = _a.middleware, onComplete = _a.onComplete;\r\n        var _this = this;\r\n        this.isActive = true;\r\n        this.update = function (v) {\r\n            if (_this.observer.update)\r\n                _this.updateObserver(v);\r\n        };\r\n        this.complete = function () {\r\n            if (_this.observer.complete && _this.isActive)\r\n                _this.observer.complete();\r\n            if (_this.onComplete)\r\n                _this.onComplete();\r\n            _this.isActive = false;\r\n        };\r\n        this.error = function (err) {\r\n            if (_this.observer.error && _this.isActive)\r\n                _this.observer.error(err);\r\n            _this.isActive = false;\r\n        };\r\n        this.observer = observer;\r\n        this.updateObserver = function (v) { return observer.update(v); };\r\n        this.onComplete = onComplete;\r\n        if (observer.update && middleware && middleware.length) {\r\n            middleware.forEach(function (m) { return _this.updateObserver = m(_this.updateObserver, _this.complete); });\r\n        }\r\n    }\r\n    return Observer;\r\n}());\r\nexport { Observer };\r\nexport default (function (observerCandidate, _a, onComplete) {\r\n    var middleware = _a.middleware;\r\n    if (typeof observerCandidate === 'function') {\r\n        return new Observer({ middleware: middleware, onComplete: onComplete }, { update: observerCandidate });\r\n    }\r\n    else {\r\n        return new Observer({ middleware: middleware, onComplete: onComplete }, observerCandidate);\r\n    }\r\n});\r\n//# sourceMappingURL=index.js.map","map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../src/observer/index.ts\"],\"names\":[],\"mappings\":\"AAGA;IAME,kBAAY,EAAyC,EAAE,QAAyB;YAAlE,0BAAU,EAAE,0BAAU;QAApC,iBAQC;QAbO,aAAQ,GAAG,IAAI,CAAC;QAexB,WAAM,GAAG,UAAC,CAAM;YACd,IAAI,KAAI,CAAC,QAAQ,CAAC,MAAM;gBAAE,KAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;QACnD,CAAC,CAAA;QAED,aAAQ,GAAG;YACT,IAAI,KAAI,CAAC,QAAQ,CAAC,QAAQ,IAAI,KAAI,CAAC,QAAQ;gBAAE,KAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;YACtE,IAAI,KAAI,CAAC,UAAU;gBAAE,KAAI,CAAC,UAAU,EAAE,CAAC;YACvC,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACxB,CAAC,CAAA;QAED,UAAK,GAAG,UAAC,GAAQ;YACf,IAAI,KAAI,CAAC,QAAQ,CAAC,KAAK,IAAI,KAAI,CAAC,QAAQ;gBAAE,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACnE,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACxB,CAAC,CAAA;QAtBC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,cAAc,GAAG,UAAC,CAAM,IAAK,OAAA,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAlB,CAAkB,CAAC;QACrD,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAE7B,IAAI,QAAQ,CAAC,MAAM,IAAI,UAAU,IAAI,UAAU,CAAC,MAAM,EAAE;YACtD,UAAU,CAAC,OAAO,CAAC,UAAC,CAAa,IAAK,OAAA,KAAI,CAAC,cAAc,GAAG,CAAC,CAAC,KAAI,CAAC,cAAc,EAAE,KAAI,CAAC,QAAQ,CAAC,EAA3D,CAA2D,CAAC,CAAC;SACpG;IACH,CAAC;IAgBH,eAAC;AAAD,CAAC,AA9BD,IA8BC;;AAED,gBAAe,UAAC,iBAAoC,EAAE,EAA6B,EAAE,UAAqB;QAAlD,0BAAU;IAChE,IAAI,OAAO,iBAAiB,KAAK,UAAU,EAAE;QAC3C,OAAO,IAAI,QAAQ,CAAC,EAAE,UAAU,YAAA,EAAE,UAAU,YAAA,EAAE,EAAE,EAAE,MAAM,EAAE,iBAAiB,EAAE,CAAC,CAAC;KAChF;SAAM;QACL,OAAO,IAAI,QAAQ,CAAC,EAAE,UAAU,YAAA,EAAE,UAAU,YAAA,EAAE,EAAE,iBAAiB,CAAC,CAAC;KACpE;AACH,CAAC,EAAC\"}","dts":{"name":"/Users/mattperry/Sites/popmotion/packages/popmotion/observer/index.d.ts","text":"import { IObserver, ObserverCandidate, ObserverProps, PartialObserver } from './types';\r\nexport declare class Observer implements IObserver {\r\n    private isActive;\r\n    private observer;\r\n    private updateObserver;\r\n    private onComplete;\r\n    constructor({middleware, onComplete}: ObserverProps, observer: PartialObserver);\r\n    update: (v: any) => void;\r\n    complete: () => void;\r\n    error: (err: any) => void;\r\n}\r\ndeclare const _default: (observerCandidate: ObserverCandidate, { middleware }: ObserverProps, onComplete?: Function) => Observer;\r\nexport default _default;\r\n"}}
