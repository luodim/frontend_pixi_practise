{"code":"import { timeSinceLastFrame } from 'framesync';\r\nimport { number } from 'style-value-types';\r\nimport action from '../../action';\r\nimport vectorAction from '../../action/vector';\r\nimport onFrame from '../every-frame';\r\nvar decay = function (props) {\r\n    if (props === void 0) { props = {}; }\r\n    return action(function (_a) {\r\n        var complete = _a.complete, update = _a.update;\r\n        var _b = props.velocity, velocity = _b === void 0 ? 0 : _b, _c = props.from, from = _c === void 0 ? 0 : _c, _d = props.power, power = _d === void 0 ? 0.8 : _d, _e = props.timeConstant, timeConstant = _e === void 0 ? 350 : _e, _f = props.restDelta, restDelta = _f === void 0 ? 0.5 : _f, modifyTarget = props.modifyTarget;\r\n        var elapsed = 0;\r\n        var amplitude = power * velocity;\r\n        var idealTarget = Math.round(from + amplitude);\r\n        var target = (typeof modifyTarget === 'undefined')\r\n            ? idealTarget\r\n            : modifyTarget(idealTarget);\r\n        var timer = onFrame().start(function () {\r\n            elapsed += timeSinceLastFrame();\r\n            var delta = -amplitude * Math.exp(-elapsed / timeConstant);\r\n            var isMoving = (delta > restDelta || delta < -restDelta);\r\n            var current = isMoving ? target + delta : target;\r\n            update(current);\r\n            if (!isMoving) {\r\n                timer.stop();\r\n                complete();\r\n            }\r\n        });\r\n        return {\r\n            stop: function () { return timer.stop(); }\r\n        };\r\n    });\r\n};\r\nexport default vectorAction(decay, {\r\n    from: number.test,\r\n    modifyTarget: function (func) { return typeof func === 'function'; },\r\n    velocity: number.test\r\n});\r\n//# sourceMappingURL=index.js.map","map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/animations/decay/index.ts\"],\"names\":[],\"mappings\":\"AACA,OAAO,EAAE,kBAAkB,EAAE,MAAM,WAAW,CAAC;AAC/C,OAAO,EAAE,MAAM,EAAE,MAAM,mBAAmB,CAAC;AAC3C,OAAO,MAAM,MAAM,cAAc,CAAC;AAElC,OAAO,YAAY,MAAM,qBAAqB,CAAC;AAC/C,OAAO,OAAO,MAAM,gBAAgB,CAAC;AAGrC,IAAM,KAAK,GAAG,UAAC,KAAiB;IAAjB,sBAAA,EAAA,UAAiB;IAAa,OAAA,MAAM,CAAC,UAAC,EAAoB;YAAlB,sBAAQ,EAAE,kBAAM;QAEnE,IAAA,mBAAY,EAAZ,iCAAY,EACZ,eAAQ,EAAR,6BAAQ,EACR,gBAAW,EAAX,gCAAW,EACX,uBAAkB,EAAlB,uCAAkB,EAClB,oBAAe,EAAf,oCAAe,EACf,iCAAY,CACJ;QACV,IAAI,OAAO,GAAG,CAAC,CAAC;QAChB,IAAM,SAAS,GAAG,KAAK,GAAG,QAAQ,CAAC;QACnC,IAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC;QACjD,IAAM,MAAM,GAAG,CAAC,OAAO,YAAY,KAAK,WAAW,CAAC;YAClD,CAAC,CAAC,WAAW;YACb,CAAC,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;QAE9B,IAAM,KAAK,GAAG,OAAO,EAAE,CAAC,KAAK,CAAC;YAC5B,OAAO,IAAI,kBAAkB,EAAE,CAAC;YAChC,IAAM,KAAK,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,GAAG,YAAY,CAAC,CAAC;YAC7D,IAAM,QAAQ,GAAG,CAAC,KAAK,GAAG,SAAS,IAAI,KAAK,GAAG,CAAC,SAAS,CAAC,CAAC;YAC3D,IAAM,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC;YAEnD,MAAM,CAAC,OAAO,CAAC,CAAC;YAEhB,IAAI,CAAC,QAAQ,EAAE;gBACb,KAAK,CAAC,IAAI,EAAE,CAAC;gBACb,QAAQ,EAAE,CAAC;aACZ;QACH,CAAC,CAAC,CAAC;QAEH,OAAO;YACL,IAAI,EAAE,cAAM,OAAA,KAAK,CAAC,IAAI,EAAE,EAAZ,CAAY;SACzB,CAAC;IACJ,CAAC,CAAC;AAjC2C,CAiC3C,CAAC;AAEH,eAAe,YAAY,CAAC,KAAK,EAAE;IACjC,IAAI,EAAE,MAAM,CAAC,IAAI;IACjB,YAAY,EAAE,UAAC,IAAS,IAAK,OAAA,OAAO,IAAI,KAAK,UAAU,EAA1B,CAA0B;IACvD,QAAQ,EAAE,MAAM,CAAC,IAAI;CACtB,CAAC,CAAC\"}","dts":{"name":"/Users/mattperry/Sites/popmotion/packages/popmotion/animations/decay/index.d.ts","text":"import { Action } from '../../action';\r\ndeclare const _default: (props: {\r\n    [key: string]: any;\r\n}) => Action;\r\nexport default _default;\r\n"}}
