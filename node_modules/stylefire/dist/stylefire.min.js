!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.stylefire={})}(this,function(e){"use strict";var t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r=0,n="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(e){return window.requestAnimationFrame(e)}:function(e){var t=Date.now(),n=Math.max(0,16.7-(t-r));r=t+n,setTimeout(function(){return e(r)},n)};function o(e){var t=[],r=[],n=0,o=!1,a=0;return{cancel:function(e){var t=r.indexOf(e);-1!==t&&r.splice(t,1)},process:function(){for(o=!0,t=(e=[r,t])[0],(r=e[1]).length=0,n=t.length,a=0;a<n;a++)t[a]();var e;o=!1},schedule:function(a,i){void 0===i&&(i=!1),e();var s=i&&o,u=s?t:r;-1===u.indexOf(a)&&(u.push(a),s&&(n=t.length))}}}"undefined"!=typeof performance&&performance.now;var a=!1;function i(){a||(a=!0,n(l))}var s=o(i),u=o(i),f=o(i),c=o(i);function l(e){a=!1,s.process(),u.process(),f.process(),c.process()}var d,p=f.schedule,h=function(e){var t=e.onRead,r=e.onRender,n=e.aliasMap,o=void 0===n?{}:n,a=e.useCache,i=void 0===a||a;return function(e){var n={},a=[],s=!1,u=function(e,t){var r=o[e]||e,i=n[r];n[r]=t,n[r]!==i&&(-1===a.indexOf(r)&&a.push(r),s||(s=!0,p(f)))};function f(t){return void 0===t&&(t=!1),(t||s)&&(r(n,e,a),s=!1,a.length=0),this}return{get:function(r){var a=o[r]||r;return a?i&&void 0!==n[a]?n[a]:t(a,e):n},set:function(e,t){if("string"==typeof e){if(void 0===t)return function(t){return u(e,t)};u(e,t)}else for(var r in e)e.hasOwnProperty(r)&&u(r,e[r]);return this},render:f}}},v=/([a-z])([A-Z])/g,g=function(e){return e.replace(v,"$1-$2").toLowerCase()},m=new Map,w=new Map,y=["Webkit","Moz","O","ms",""],O=y.length,b=function(e,t){void 0===t&&(t=!1);var r=t?w:m;return r.has(e)||function(e){if("undefined"!=typeof document){d=d||document.createElement("div");for(var t=0;t<O;t++){var r=y[t],n=""===r,o=n?e:r+e.charAt(0).toUpperCase()+e.slice(1);o in d.style&&(m.set(e,o),w.set(e,(n?"":"-")+g(o)))}}}(e),r.get(e)||e},x=["","X","Y","Z"],Y=["translate","scale","rotate","skew","transformPerspective"].reduce(function(e,t){return x.reduce(function(e,r){return e.push(t+r),e},e)},["x","y","z"]),k=Y.reduce(function(e,t){return e[t]=!0,e},{}),X=function(e){return!0===k[e]},L=function(e,t){return Y.indexOf(e)-Y.indexOf(t)},M=function(e){return"transformOriginX"===e||"transformOriginY"===e},C=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},T=function(e,t){return function(r){return Math.max(Math.min(r,t),e)}},P=function(e){return{test:(t=e,function(e){return"string"==typeof e&&-1!==e.indexOf(t)}),parse:parseFloat,transform:function(t){return""+t+e}};var t},Z=function(e){return function(t){return"string"==typeof t&&0===t.indexOf(e)}},R=function(e){return e.substring(e.indexOf("(")+1,e.lastIndexOf(")"))},S=function(e){return"string"==typeof e?e.split(/,\s*/):[e]};function j(e){var t=e.length;return function(r){for(var n={},o=S(R(r)),a=0;a<t;a++)n[e[a]]=void 0!==o[a]?parseFloat(o[a]):1;return n}}var A={test:function(e){return"number"==typeof e},parse:parseFloat,transform:function(e){return e}},E=C({},A,{transform:T(0,1)}),F=P("deg"),H=P("%"),N=P("px"),V=C({},A,{default:1}),z=T(0,255),I=C({},A,{transform:function(e){return Math.round(z(e))}}),q={test:Z("rgb"),parse:j(["red","green","blue","alpha"]),transform:function(e){var t=e.red,r=e.green,n=e.blue,o=e.alpha;return function(e){var t=e.red,r=e.green,n=e.blue,o=e.alpha;return"rgba("+t+", "+r+", "+n+", "+(void 0===o?1:o)+")"}({red:I.transform(t),green:I.transform(r),blue:I.transform(n),alpha:o})}},B={test:Z("hsl"),parse:j(["hue","saturation","lightness","alpha"]),transform:function(e){var t=e.hue,r=e.saturation,n=e.lightness,o=e.alpha;return function(e){var t=e.hue,r=e.saturation,n=e.lightness,o=e.alpha;return"hsla("+t+", "+r+", "+n+", "+(void 0===o?1:o)+")"}({hue:Math.round(t),saturation:H.transform(r),lightness:H.transform(n),alpha:o})}},W=C({},q,{test:Z("#"),parse:function(e){var t,r,n;return e.length>4?(t=e.substr(1,2),r=e.substr(3,2),n=e.substr(5,2)):(t=e.substr(1,1),r=e.substr(2,1),n=e.substr(3,1),t+=t,r+=r,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:1}}}),_={test:function(e){return q.test(e)||B.test(e)||W.test(e)},parse:function(e){return q.test(e)?q.parse(e):B.test(e)?B.parse(e):W.test(e)?W.parse(e):e},transform:function(e){return function(e){return void 0!==e.red}(e)?q.transform(e):function(e){return void 0!==e.hue}(e)?B.transform(e):e}},D={color:_,backgroundColor:_,outlineColor:_,fill:_,stroke:_,borderColor:_,borderTopColor:_,borderRightColor:_,borderBottomColor:_,borderLeftColor:_,borderRadius:N,width:N,maxWidth:N,height:N,maxHeight:N,top:N,left:N,bottom:N,right:N,rotate:F,rotateX:F,rotateY:F,rotateZ:F,scale:V,scaleX:V,scaleY:V,scaleZ:V,skewX:F,skewY:F,distance:N,translateX:N,translateY:N,translateZ:N,perspective:N,opacity:E,transformOriginX:H,transformOriginY:H,transformOriginZ:N},G=function(e){return D[e]},U="number",$="object",J="transform-origin",K="transform",Q="translateZ",ee=";transform: none",te=function(e,t){return";"+e+":"+t};function re(e,t,r,n){void 0===t&&(t=!0),void 0===r&&(r=!0);for(var o=!0===t?Object.keys(e):t,a="",i="",s=!1,u=!0,f=!1,c=!1,l=o.length,d=0;d<l;d++){var p=o[d];if(X(p)){for(var h in f=!0,e)X(h)&&-1===o.indexOf(h)&&o.push(h);break}}o.sort(L);var v=o.length;for(d=0;d<v;d++){p=o[d];if(!n.has(p)){var g=X(p),m=e[p],w=G(p);g&&(w.default&&m!==w.default||!w.default&&0!==m)&&(u=!1),w&&(typeof m===U||typeof m===$)&&w.transform&&(m=w.transform(m)),g?(i+=p+"("+m+") ",c=p===Q||c):M(p)?(e[p]=m,s=!0):a+=te(b(p,!0),m)}}return s&&(a+=te(J,(e.transformOriginX||0)+" "+(e.transformOriginY||0)+" "+(e.transformOriginZ||0))),f&&(!c&&r&&(i+=Q+"(0)"),a+=te(K,u?ee:i)),a}var ne=new Set(["scrollLeft","scrollTop"]),oe=h({onRead:function(e,t){var r=t.element,n=t.preparseOutput,o=G(e);if(X(e))return o&&o.default||0;if(ne.has(e))return r[e];var a=window.getComputedStyle(r,null).getPropertyValue(b(e,!0))||0;return n&&o&&o.parse?o.parse(a):a},onRender:function(e,t,r){var n=t.element,o=t.enableHardwareAcceleration;n.style.cssText+=re(e,r,o,ne),-1!==r.indexOf("scrollLeft")&&(n.scrollLeft=e.scrollLeft),-1!==r.indexOf("scrollTop")&&(n.scrollTop=e.scrollTop)},aliasMap:{x:"translateX",y:"translateY",z:"translateZ",originX:"transformOriginX",originY:"transformOriginY",originZ:"transformOriginZ"},uncachedValues:ne}),ae=function(e,t){return e/100*t+"px"},ie={fill:_,stroke:_,scale:V,scaleX:V,scaleY:V,opacity:E,fillOpacity:E,strokeOpacity:E},se=h({onRead:function(e,t){var r=t.element;if(X(e)){var n=function(e){return ie[e]}(e);return n?n.default:0}return r.getAttribute(e)},onRender:function(e,t,r){var n=t.dimensions;!function(e,t){for(var r in t)t.hasOwnProperty(r)&&e.setAttribute(r,t[r])}(t.element,function(e,t,r,n){var o=!1,a=!1,i={},s=r?{pathLength:"0",pathSpacing:""+n}:void 0,u=void 0!==e.scale?e.scale||1e-7:e.scaleX||1,f=void 0!==e.scaleY?e.scaleY||1e-7:u||1,c=t.width*((e.originX||50)/100)+t.x,l=t.height*((e.originY||50)/100)+t.y,d=1*u*-c,p=1*f*-l,h=c/u,v=l/f,m={translate:"translate("+e.translateX+", "+e.translateY+") ",scale:"translate("+d+", "+p+") scale("+u+", "+f+") translate("+h+", "+v+") ",rotate:"rotate("+e.rotate+", "+c+", "+l+") ",skewX:"skewX("+e.skewX+") ",skewY:"skewY("+e.skewY+") "};for(var w in e)if(e.hasOwnProperty(w)){var y=e[w];X(w)?o=!0:!r||"pathLength"!==w&&"pathSpacing"!==w||"number"!=typeof y?r&&"pathOffset"===w?i["stroke-dashoffset"]=ae(-y,n):i[g(w)]=y:(a=!0,s[w]=ae(y,n))}if(a&&(i["stroke-dasharray"]=s.pathLength+" "+s.pathSpacing),o)for(var w in i.transform="",m)if(m.hasOwnProperty(w)){var O="scale"===w?"1":"0";i.transform+=m[w].replace(/undefined/g,O)}return i}(e,n,t.isPath,t.pathLength))},aliasMap:{x:"translateX",y:"translateY",background:"fill"}}),ue=h({useCache:!1,onRead:function(e){return"scrollTop"===e?window.pageYOffset:window.pageXOffset},onRender:function(e){var t=e.scrollTop,r=void 0===t?0:t,n=e.scrollLeft,o=void 0===n?0:n;return window.scrollTo(o,r)}}),fe=function(){};"production"!==process.env.NODE_ENV&&(fe=function(e,t){if(!e)throw new Error("Hey, listen! ".toUpperCase()+t)});var ce=new WeakMap,le=function(e,r){var n;return e instanceof HTMLElement?n=function(e,r){return oe(t({element:e,enableHardwareAcceleration:!0,preparseOutput:!0},r))}(e,r):e instanceof SVGElement?n=function(e){var t=e.getBBox(),r={element:e,dimensions:{x:t.x,y:t.y,width:t.width,height:t.height},isPath:!1};return"path"===e.tagName&&(r.isPath=!0,r.pathLength=e.getTotalLength()),se(r)}(e):"undefined"!=typeof window&&e===window&&(n=ue(e)),fe(void 0!==n,"No valid node provided. Node must be HTMLElement, SVGElement or window."),ce.set(e,n),n},de=function(e,t){return ce.has(e)?ce.get(e):le(e,t)};e.default=function(e,t){var r="string"==typeof e?document.querySelector(e):e;return de(r,t)},e.createStylerFactory=h,e.buildStyles=re,Object.defineProperty(e,"__esModule",{value:!0})});
